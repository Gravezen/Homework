from utils import randbool # –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞
from utils import randcell # –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –µ—â—ë —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞
from utils import randcell2

# 0 - –ø–æ–ª–µ
# 1 - –¥–µ—Ä–µ–≤–æ
# 2 - —Ä–µ–∫–∞
# 3 - –≥–æ—Å–ø–∏—Ç–∞–ª—å
# 4 - –∞–ø–≥—Ä–µ–π–¥ —à–æ–ø

class Map:
    
    def generate_river(self, l): # —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∫–∏, –≥–¥–µ l - –¥–ª–∏–Ω–∞ —Ä–µ–∫–∏
        rc = randcell(self.w, self.h) # –∑–∞–¥–∞—ë—Ç—Å—è —Å–ø–∏—Å–æ–∫, –≤—ã—Ä–∞–∂–µ–Ω–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ —É—Å—Ç—å—è —Ä–µ–∫–∏
        rx, ry = rc[0], rc[1] # –ø–µ—Ä–µ–ø—Ä–∏—Å–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è rc, —á—Ç–æ–± –±—ã–ª–æ –ø—Ä–æ—â–µ
        if (self.check_bounds(rx, ry)):
            self.cells[rx][ry] = 2 # –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º —Å–ø–∏—Å–∫–µ –±–µ—Ä–µ–º 2 –∑–Ω–∞—á–µ–Ω–∏—è, —Ç–∞–º —Å—Ç–∞–≤–∏–º —Ä–µ–∫—É
            while l > 0:
                rc2 = randcell2(rx, ry)
                rx2, ry2 = rc2[0], rc2[1]
                if (self.check_bounds(rx2, ry2)): # –≤—ã–ø–æ–ª–Ω—è–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–æ–≤–æ–π –∫–ª–µ—Ç–∫–∏, —á—Ç–æ–± –Ω–µ –≤—ã—à–ª–∞ –∑–∞ –ø–æ–ª–µ!
                    self.cells[rx2][ry2] = 2 # –µ—Å–ª–∏ –≤—Å—ë –æ–∫, –≤ –ø–æ–ª—É—á–∏–≤—à—É—é—Å—è –∫–ª–µ—Ç–∫—É —Å—Ç–∞–≤–∏–º –≤–æ–¥—É
                    rx, ry = rx2, ry2 # –∑–∞–º–µ–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–ª–µ–¥—É—é—â–µ–π –∫–ª–µ—Ç–∫–∏
                    l -= 1 # —É–º–µ–Ω—å—à–∞–µ–º –¥–ª–∏–Ω—É —Ä–µ–∫–∏

    def generate_forest(self, r, mxr): # r - –¥–∏–∞–ø–∞–∑–æ–Ω —Ä–∞–Ω–¥–æ–º–∞, mxr - –æ—Ç—Å–µ—á–∫–∞(–µ—Å–ª–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å —Ä–∞–Ω–¥–æ–º–∞ –≤—ã—à–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –æ—Ç—Å–µ–∫–∞–µ–º)
        for ri in range(self.h): # –ø—Ä–æ—Ö–æ–¥–∏–º—Å—è –ø–æ –ø–æ–ª—é (map)
            for ci in range(self.w):
                if randbool(r, mxr):
                    self.cells[ri][ci] = 1

    def print_map(self):
        print('‚¨õ' * (self.w + 2)) # –≤–≤–æ–¥–∏–º —Ä–∞–º–∫—É
        for row in self.cells: # –≤–≤–æ–¥–∏–º –ø–æ–ª—è
            print('‚¨õ', end="") # –≤–≤–æ–¥–∏–º —Ä–∞–º–∫—É
            for cell in row: # 2 —Ü–∏–∫–ª–∞, —Ç–∞–∫ –∫–∞–∫ —Å–ø–∏—Å–æ–∫ –≤ —Å–ø–∏—Å–∫–µ
                if cell == 0:
                    print('üü©', end="") # –≤ –∫–æ–Ω—Ü–µ —Å—Ç–∞–≤–∏–º –Ω–∏—á–µ–≥–æ, —á—Ç–æ–± –Ω–µ –ø–µ—Ä–µ–∫–∏–¥—ã–≤–∞–ª–æ –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–æ–∫—É
                elif cell == 1:
                    print('üå≤', end="")
                elif cell == 2:
                    print('üåä', end="")
                elif cell == 3:
                    print('üè•', end="")
                elif cell == 4:
                    print('‚õ™', end="")
            print('‚¨õ') # –≤–≤–æ–¥–∏–º —Ä–∞–º–∫—É
        print('‚¨õ' * (self.w + 2))

    def check_bounds(self, x, y):
        if (x < 0 or y < 0 or x >= self.h or y >= self.w):
            return False
        return True

    def __init__(self, w, h):
        self.w = w
        self.h = h
        self.cells = [[0 for i in range(w)] for j in range(h)]


tmp = Map(10, 20)
tmp.generate_forest(7, 10) # –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ª–µ—Å –ø—Ä–∏–º–µ—Ä–Ω–æ 80%
tmp.generate_river(5) # –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–µ–∫—É –¥–ª–∏–Ω–æ–π 5
tmp.print_map()